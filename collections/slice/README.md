# Note

在Go语言中都是值传递，没有引用传递。slice 看起来像引用，其实是值类型

# 底层结构

```go
type slice struct {
    ptr unsafe.Pointer
    len int
    cap int
}
```

```
+---------------------+-----------------------+
| Slice Header        | Underlying Array      |
+---------------------+-----------------------+
| Pointer (0x1040a150)| [10, 20, 30, 40, 50]  |
| Len (5)             |                       |
| Cap (8)             |                       |
+---------------------+-----------------------+
```

slice的底层结构其中一个实际上是有一个指针，指向了一个数组。那么，在把a赋值给b的时候，只是把slice的结构也就是Array、Len和Cap复制给了b，但Array指向的数组还是同一个。所以，这就是为什么更改了b[0]，a[0]的值也更改了的原因。

在Go中还有chan类型、map类型等都是同样的原理。


# 扩容

* 如果 cap 小于 1024，扩容直接 *2；
* 超过 1024，就不再 2 倍了，会按照 cap += cap / 4 这样的增幅增长（也就是增长 1.25 倍）；
* 如果是自定义类型，还得额外考虑元素大小对扩容策略的影响；

# append
